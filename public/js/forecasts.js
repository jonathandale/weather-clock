
App.module('Forecasts', function (Forecasts, App, Backbone, Marionette, $, _){

  //New forecast model
  Forecasts.Forecast = Backbone.Model.extend({

    defaults: {
      'scale': 'f'
    },

    getTemperature: function(temp){
      var convert = {
        'f': function(temp){
          return temp;
        },
        'c': function(temp){
          return (temp - 32) * 5/9;
        }
      };
      return Math.round(convert[this.get('scale')](temp));
    },

    isDayTime: function(forecast){
      var now = moment(),
          sunrise = moment.unix(forecast.sunriseTime),
          sunset = moment.unix(forecast.sunsetTime);

      return (now.isAfter(sunrise) && now.isBefore(sunset)) ? true : false;
    },

    getSvg: function(iconName){
      var svgMap = {
        'Sun': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M71.997,51.999h-3.998c-1.105,0-2-0.895-2-1.999s0.895-2,2-2h3.998  c1.105,0,2,0.896,2,2S73.103,51.999,71.997,51.999z M64.142,38.688c-0.781,0.781-2.049,0.781-2.828,0  c-0.781-0.781-0.781-2.047,0-2.828l2.828-2.828c0.779-0.781,2.047-0.781,2.828,0c0.779,0.781,0.779,2.047,0,2.828L64.142,38.688z   M50.001,61.998c-6.627,0-12-5.372-12-11.998c0-6.627,5.372-11.999,12-11.999c6.627,0,11.998,5.372,11.998,11.999  C61.999,56.626,56.628,61.998,50.001,61.998z M50.001,42.001c-4.418,0-8,3.581-8,7.999c0,4.417,3.583,7.999,8,7.999  s7.998-3.582,7.998-7.999C57.999,45.582,54.419,42.001,50.001,42.001z M50.001,34.002c-1.105,0-2-0.896-2-2v-3.999  c0-1.104,0.895-2,2-2c1.104,0,2,0.896,2,2v3.999C52.001,33.106,51.104,34.002,50.001,34.002z M35.86,38.688l-2.828-2.828  c-0.781-0.781-0.781-2.047,0-2.828s2.047-0.781,2.828,0l2.828,2.828c0.781,0.781,0.781,2.047,0,2.828S36.641,39.469,35.86,38.688z   M34.002,50c0,1.104-0.896,1.999-2,1.999h-4c-1.104,0-1.999-0.895-1.999-1.999s0.896-2,1.999-2h4C33.107,48,34.002,48.896,34.002,50  z M35.86,61.312c0.781-0.78,2.047-0.78,2.828,0c0.781,0.781,0.781,2.048,0,2.828l-2.828,2.828c-0.781,0.781-2.047,0.781-2.828,0  c-0.781-0.78-0.781-2.047,0-2.828L35.86,61.312z M50.001,65.998c1.104,0,2,0.895,2,1.999v4c0,1.104-0.896,2-2,2  c-1.105,0-2-0.896-2-2v-4C48.001,66.893,48.896,65.998,50.001,65.998z M64.142,61.312l2.828,2.828c0.779,0.781,0.779,2.048,0,2.828  c-0.781,0.781-2.049,0.781-2.828,0l-2.828-2.828c-0.781-0.78-0.781-2.047,0-2.828C62.093,60.531,63.36,60.531,64.142,61.312z"/></svg>',
        'Moon': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M50,61.998c-6.627,0-11.999-5.372-11.999-11.998  c0-6.627,5.372-11.999,11.999-11.999c0.755,0,1.491,0.078,2.207,0.212c-0.132,0.576-0.208,1.173-0.208,1.788  c0,4.418,3.582,7.999,8,7.999c0.615,0,1.212-0.076,1.788-0.208c0.133,0.717,0.211,1.452,0.211,2.208  C61.998,56.626,56.626,61.998,50,61.998z M48.212,42.208c-3.556,0.813-6.211,3.989-6.211,7.792c0,4.417,3.581,7.999,7.999,7.999  c3.802,0,6.978-2.655,7.791-6.211C52.937,50.884,49.115,47.062,48.212,42.208z"/></svg>',
        'Cloud-Rain-Sun': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M79.941,43.642h-4c-1.104,0-2-0.895-2-2c0-1.104,0.896-2,2-2h4  c1.104,0,2,0.896,2,2C81.941,42.748,81.045,43.642,79.941,43.642z M72.084,30.33c-0.781,0.781-2.047,0.781-2.828,0  c-0.781-0.78-0.781-2.047,0-2.828l2.828-2.828c0.781-0.78,2.047-0.78,2.828,0c0.781,0.781,0.781,2.048,0,2.828L72.084,30.33z   M69.137,45.937L69.137,45.937c1.75,2.084,2.805,4.77,2.805,7.704c0,5.223-3.342,9.652-7.998,11.301v-4.381  c2.389-1.383,4-3.961,4-6.92c0-4.417-3.582-7.999-8-7.999c-1.6,0-3.084,0.48-4.334,1.291c-1.23-5.317-5.973-9.29-11.664-9.29  c-6.627,0-11.998,5.372-11.998,11.998c0,3.55,1.551,6.728,4,8.925v4.916c-4.777-2.768-8-7.922-8-13.841  c0-8.835,7.162-15.997,15.998-15.997c1.572,0,3.09,0.231,4.523,0.654c2.195-2.827,5.617-4.654,9.475-4.654  c6.627,0,11.998,5.371,11.998,11.998C69.941,43.158,69.65,44.602,69.137,45.937z M57.943,33.644c-2.211,0-4.215,0.898-5.662,2.35  c2.34,1.435,4.285,3.452,5.629,5.854c0.664-0.113,1.338-0.205,2.033-0.205c2.125,0,4.119,0.559,5.85,1.527l0,0  c0.096-0.494,0.15-1.004,0.15-1.527C65.943,37.224,62.361,33.644,57.943,33.644z M57.943,25.644c-1.104,0-2-0.895-2-2v-3.999  c0-1.104,0.896-1.999,2-1.999c1.105,0,2,0.895,2,1.999v3.999C59.943,24.75,59.049,25.644,57.943,25.644z M43.803,30.33l-2.828-2.828  c-0.779-0.78-0.779-2.047,0-2.828c0.781-0.78,2.049-0.78,2.828,0l2.828,2.828c0.781,0.781,0.781,2.048,0,2.828  C45.85,31.111,44.584,31.111,43.803,30.33z M41.945,53.641c1.105,0,2,0.896,2,2v15.998c0,1.105-0.895,2-2,2c-1.104,0-2-0.895-2-2  V55.641C39.945,54.537,40.842,53.641,41.945,53.641z M49.945,57.641c1.104,0,2,0.895,2,2v15.998c0,1.104-0.896,2-2,2  c-1.105,0-2-0.896-2-2V59.641C47.945,58.535,48.84,57.641,49.945,57.641z M57.943,53.641c1.105,0,2,0.896,2,2v15.998  c0,1.105-0.895,2-2,2c-1.104,0-2-0.895-2-2V55.641C55.943,54.537,56.84,53.641,57.943,53.641z"/></svg>',
        'Cloud-Rain-Moon': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" d="M50.001,57.641c-1.105,0-2,0.895-2,2v15.998c0,1.104,0.895,2,2,2    c1.104,0,2-0.896,2-2V59.641C52.001,58.535,51.104,57.641,50.001,57.641z M57.999,53.641c-1.104,0-1.999,0.896-1.999,2v15.998    c0,1.105,0.896,2,1.999,2c1.105,0,2-0.895,2-2V55.641C59.999,54.537,59.104,53.641,57.999,53.641z M42.001,53.641    c-1.104,0-1.999,0.896-1.999,2v15.998c0,1.105,0.896,2,1.999,2c1.105,0,2-0.895,2-2V55.641    C44.001,54.537,43.106,53.641,42.001,53.641z M72.997,38.642c0-0.754-0.078-1.49-0.211-2.207    c-0.576,0.132-1.173,0.208-1.788,0.208c-4.418,0-7.999-3.581-7.999-7.999c0-0.615,0.076-1.213,0.207-1.788    c-0.716-0.134-1.451-0.212-2.207-0.212c-5.24,0-9.684,3.365-11.318,8.047c-1.766-0.672-3.678-1.047-5.68-1.047    c-8.835,0-15.998,7.162-15.998,15.997c0,5.919,3.223,11.074,8,13.841v-4.916c-2.45-2.197-4-5.375-4-8.925    c0-6.626,5.371-11.998,11.998-11.998c5.691,0,10.434,3.973,11.665,9.29c1.25-0.811,2.733-1.291,4.333-1.291    c4.418,0,7.999,3.581,7.999,7.999c0,2.959-1.61,5.537-3.999,6.92v4.381c4.656-1.648,7.999-6.078,7.999-11.301    c0-2.562-0.811-4.933-2.18-6.882C71.786,44.621,72.997,41.777,72.997,38.642z M67.005,43.914    c-1.973-1.424-4.388-2.271-7.006-2.271c-0.696,0-1.369,0.092-2.033,0.205c-1.156-2.068-2.762-3.849-4.679-5.221    c0.75-2.865,3.024-5.111,5.924-5.775c0.904,4.855,4.726,8.676,9.579,9.58C68.489,41.746,67.862,42.933,67.005,43.914z"/></svg>',
        'Cloud-Snow-Sun': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M79.997,43.642h-4c-1.104,0-2-0.895-2-2c0-1.104,0.896-2,2-2h4  c1.104,0,1.999,0.896,1.999,2C81.996,42.748,81.101,43.642,79.997,43.642z M72.14,30.33c-0.781,0.781-2.047,0.781-2.828,0  s-0.781-2.047,0-2.828l2.828-2.828c0.781-0.781,2.047-0.781,2.828,0s0.781,2.047,0,2.828L72.14,30.33z M69.192,45.937L69.192,45.937  c1.749,2.084,2.805,4.77,2.805,7.704c0,5.223-3.342,9.652-7.998,11.303v-4.381c2.389-1.385,3.999-3.963,3.999-6.922  c0-4.417-3.581-7.999-7.999-7.999c-1.6,0-3.083,0.48-4.334,1.291c-1.231-5.316-5.973-9.291-11.664-9.291  c-6.627,0-11.998,5.373-11.998,12c0,3.549,1.55,6.729,3.999,8.924v4.916c-4.776-2.768-7.999-7.922-7.999-13.84  c0-8.836,7.162-15.999,15.998-15.999c1.572,0,3.09,0.232,4.523,0.655c2.195-2.828,5.618-4.654,9.475-4.654  c6.627,0,11.999,5.371,11.999,11.998C69.998,43.158,69.705,44.601,69.192,45.937z M57.999,33.644c-2.212,0-4.215,0.898-5.662,2.351  c2.34,1.435,4.285,3.453,5.629,5.853c0.664-0.113,1.337-0.205,2.033-0.205c2.125,0,4.118,0.559,5.85,1.527l0,0  c0.096-0.494,0.15-1.004,0.15-1.527C65.999,37.225,62.417,33.644,57.999,33.644z M57.999,25.645c-1.104,0-2-0.895-2-2v-3.999  c0-1.104,0.896-2,2-2c1.104,0,2,0.896,2,2v3.999C59.999,24.75,59.104,25.645,57.999,25.645z M43.858,30.33l-2.828-2.828  c-0.78-0.781-0.78-2.047,0-2.828c0.781-0.781,2.048-0.781,2.828,0l2.828,2.828c0.781,0.781,0.781,2.047,0,2.828  C45.906,31.111,44.64,31.111,43.858,30.33z M42.001,57.641c1.104,0,2,0.896,2,2c0,1.105-0.896,2-2,2c-1.104,0-2-0.895-2-2  C40.001,58.537,40.897,57.641,42.001,57.641z M42.001,65.641c1.104,0,2,0.895,2,2c0,1.104-0.896,1.998-2,1.998  c-1.104,0-2-0.895-2-1.998C40.001,66.535,40.897,65.641,42.001,65.641z M50.001,61.641c1.104,0,1.999,0.895,1.999,2  c0,1.104-0.896,2-1.999,2c-1.105,0-2-0.896-2-2C48.001,62.535,48.896,61.641,50.001,61.641z M50.001,69.639  c1.104,0,1.999,0.896,1.999,2c0,1.105-0.896,2-1.999,2c-1.105,0-2-0.895-2-2C48.001,70.535,48.896,69.639,50.001,69.639z   M57.999,57.641c1.104,0,2,0.896,2,2c0,1.105-0.896,2-2,2c-1.104,0-2-0.895-2-2C55.999,58.537,56.896,57.641,57.999,57.641z   M57.999,65.641c1.104,0,2,0.895,2,2c0,1.104-0.896,1.998-2,1.998c-1.104,0-2-0.895-2-1.998  C55.999,66.535,56.896,65.641,57.999,65.641z"/></svg>',
        'Cloud-Snow-Moon': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M69.817,46.759L69.817,46.759c1.369,1.949,2.18,4.319,2.18,6.881  c0,5.223-3.342,9.652-7.998,11.303v-4.381c2.388-1.385,3.999-3.963,3.999-6.922c0-4.417-3.581-7.999-7.999-7.999  c-1.601,0-3.084,0.48-4.334,1.291c-1.231-5.317-5.973-9.291-11.664-9.291c-6.627,0-11.998,5.373-11.998,12  c0,3.549,1.55,6.729,3.999,8.924v4.916c-4.777-2.768-7.999-7.922-7.999-13.84c0-8.835,7.162-15.999,15.998-15.999  c2.002,0,3.914,0.376,5.68,1.048l0,0c1.635-4.682,6.078-8.047,11.318-8.047c0.755,0,1.49,0.078,2.207,0.211  c-0.131,0.576-0.207,1.174-0.207,1.789c0,4.418,3.58,7.998,7.998,7.998c0.616,0,1.213-0.075,1.789-0.207  c0.133,0.717,0.211,1.453,0.211,2.207C72.997,41.777,71.786,44.621,69.817,46.759z M59.21,30.852  c-2.899,0.664-5.174,2.91-5.924,5.775c1.918,1.372,3.523,3.152,4.68,5.221c0.664-0.113,1.336-0.205,2.033-0.205  c2.617,0,5.033,0.848,7.005,2.271l0,0c0.858-0.98,1.485-2.167,1.786-3.482C63.936,39.527,60.114,35.706,59.21,30.852z   M42.001,57.641c1.104,0,2,0.896,2,2c0,1.105-0.896,2-2,2s-2-0.895-2-2C40.001,58.537,40.896,57.641,42.001,57.641z M42.001,65.641  c1.104,0,2,0.895,2,2c0,1.104-0.896,1.998-2,1.998s-2-0.895-2-1.998C40.001,66.535,40.896,65.641,42.001,65.641z M50,61.641  c1.104,0,2,0.895,2,2c0,1.104-0.896,2-2,2s-1.999-0.896-1.999-2C48.001,62.535,48.896,61.641,50,61.641z M50,69.639  c1.104,0,2,0.896,2,2c0,1.105-0.896,2-2,2s-1.999-0.895-1.999-2C48.001,70.535,48.896,69.639,50,69.639z M57.999,57.641  c1.104,0,2,0.896,2,2c0,1.105-0.896,2-2,2s-2-0.895-2-2C55.999,58.537,56.895,57.641,57.999,57.641z M57.999,65.641  c1.104,0,2,0.895,2,2c0,1.104-0.896,1.998-2,1.998s-2-0.895-2-1.998C55.999,66.535,56.895,65.641,57.999,65.641z"/></svg>',
        'Cloud-Snow-Sun-Alt': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M79.997,43.642h-4c-1.104,0-1.999-0.895-1.999-2c0-1.104,0.895-2,1.999-2h4  c1.104,0,2,0.896,2,2C81.997,42.748,81.102,43.642,79.997,43.642z M72.141,30.33c-0.781,0.781-2.048,0.781-2.828,0  c-0.781-0.781-0.781-2.047,0-2.828l2.828-2.828c0.78-0.781,2.047-0.781,2.827,0c0.781,0.781,0.781,2.047,0,2.828L72.141,30.33z   M69.192,45.937L69.192,45.937c1.749,2.084,2.806,4.77,2.806,7.704c0,5.945-4.326,10.865-9.999,11.82v-4.082  c3.448-0.891,5.999-4.012,5.999-7.738c0-4.417-3.581-7.999-7.998-7.999c-1.601,0-3.084,0.48-4.334,1.291  c-1.231-5.316-5.974-9.291-11.665-9.291c-6.626,0-11.998,5.373-11.998,12c0,4.438,2.416,8.305,5.999,10.379v4.445  c-5.86-2.375-9.998-8.113-9.998-14.825c0-8.836,7.162-15.999,15.997-15.999c1.573,0,3.09,0.232,4.524,0.655  c2.195-2.828,5.617-4.654,9.475-4.654c6.626,0,11.998,5.371,11.998,11.998C69.998,43.158,69.705,44.601,69.192,45.937z M58,33.644  c-2.213,0-4.215,0.898-5.663,2.351c2.341,1.435,4.286,3.453,5.63,5.853c0.663-0.113,1.336-0.205,2.033-0.205  c2.125,0,4.118,0.559,5.85,1.527l0,0c0.096-0.494,0.149-1.004,0.149-1.527C65.999,37.224,62.417,33.644,58,33.644z M58,25.645  c-1.104,0-2-0.895-2-2v-3.999c0-1.104,0.896-2,2-2s2,0.896,2,2v3.999C60,24.75,59.104,25.645,58,25.645z M43.859,30.33l-2.828-2.828  c-0.781-0.781-0.781-2.047,0-2.828s2.047-0.781,2.828,0l2.828,2.828c0.781,0.781,0.781,2.047,0,2.828S44.641,31.111,43.859,30.33z   M43.073,59.641c0.553-0.957,1.775-1.283,2.731-0.732l2.196,1.268v-2.535c0-1.104,0.896-2,2-2s1.999,0.896,1.999,2v2.535  l2.196-1.268c0.956-0.551,2.18-0.225,2.731,0.732c0.553,0.957,0.225,2.18-0.731,2.732L54,63.641l2.196,1.268  c0.956,0.553,1.284,1.775,0.731,2.732c-0.552,0.955-1.775,1.283-2.731,0.73L52,67.104v2.535c0,1.105-0.895,2-1.999,2s-2-0.895-2-2  v-2.535l-2.196,1.268c-0.956,0.553-2.179,0.225-2.731-0.73c-0.552-0.957-0.225-2.18,0.732-2.732l2.195-1.268l-2.195-1.268  C42.849,61.82,42.521,60.598,43.073,59.641z M50.001,65.641c1.104,0,1.999-0.896,1.999-2c0-1.105-0.895-2-1.999-2s-2,0.895-2,2  C48.001,64.744,48.896,65.641,50.001,65.641z"/></svg>',
        'Cloud-Snow-Moon-Alt': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M69.818,46.759L69.818,46.759c1.369,1.949,2.18,4.319,2.18,6.881  c0,5.223-3.342,9.652-7.999,11.303v-4.381c2.389-1.385,3.999-3.963,3.999-6.922c0-4.417-3.581-7.999-7.999-7.999  c-1.6,0-3.083,0.48-4.333,1.291c-1.232-5.317-5.974-9.291-11.665-9.291c-6.626,0-11.998,5.373-11.998,12  c0,3.549,1.55,6.729,3.999,8.924v4.916c-4.776-2.768-7.999-7.922-7.999-13.84c0-8.835,7.163-15.999,15.998-15.999  c2.002,0,3.914,0.376,5.68,1.048l0,0c1.635-4.682,6.078-8.047,11.318-8.047c0.755,0,1.491,0.078,2.208,0.211  c-0.132,0.576-0.208,1.174-0.208,1.789c0,4.418,3.581,7.998,7.999,7.998c0.615,0,1.212-0.075,1.788-0.207  c0.134,0.717,0.212,1.453,0.212,2.207C72.998,41.777,71.786,44.621,69.818,46.759z M59.211,30.852  c-2.9,0.664-5.174,2.91-5.924,5.775l0,0c1.917,1.372,3.522,3.152,4.679,5.221c0.664-0.113,1.337-0.205,2.033-0.205  c2.618,0,5.033,0.847,7.005,2.271l0,0c0.859-0.98,1.486-2.167,1.786-3.482C63.936,39.527,60.115,35.706,59.211,30.852z   M43.073,59.641c0.552-0.957,1.775-1.283,2.731-0.732l2.196,1.268v-2.535c0-1.104,0.896-2,2-2c1.104,0,1.999,0.896,1.999,2v2.535  l2.196-1.268c0.956-0.551,2.18-0.225,2.731,0.732c0.553,0.957,0.225,2.18-0.731,2.732L54,63.641l2.196,1.268  c0.956,0.553,1.284,1.775,0.731,2.732c-0.552,0.955-1.775,1.283-2.731,0.73L52,67.104v2.535c0,1.105-0.896,2-1.999,2  c-1.104,0-2-0.895-2-2v-2.535l-2.196,1.268c-0.956,0.553-2.18,0.225-2.731-0.73c-0.552-0.957-0.225-2.18,0.731-2.732l2.196-1.268  l-2.196-1.268C42.849,61.82,42.521,60.598,43.073,59.641z M50.001,65.641c1.104,0,1.999-0.896,1.999-2c0-1.105-0.896-2-1.999-2  c-1.104,0-2,0.895-2,2C48.001,64.744,48.896,65.641,50.001,65.641z"/></svg>',
        'Cloud-Wind-Sun': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M79.997,43.643h-4c-1.104,0-1.999-0.896-1.999-2s0.895-2,1.999-2h4  c1.104,0,2,0.896,2,2S81.102,43.643,79.997,43.643z M72.141,30.33c-0.781,0.781-2.048,0.781-2.828,0  c-0.781-0.781-0.781-2.047,0-2.828l2.828-2.828c0.78-0.781,2.047-0.781,2.827,0c0.781,0.781,0.781,2.047,0,2.828L72.141,30.33z   M69.192,45.938L69.192,45.938c0.912,1.087,1.63,2.34,2.114,3.704h-0.01c0.213,0.602,0.385,1.222,0.5,1.863  c-1.394-0.995-3.049-1.646-4.848-1.815c-0.01-0.017-0.022-0.031-0.032-0.048h0.003c-1.384-2.389-3.961-3.999-6.92-3.999  c-1.601,0-3.084,0.48-4.334,1.29c-1.231-5.316-5.974-9.29-11.665-9.29c-6.626,0-11.998,5.372-11.998,11.999l0,0  c0,6.626,5.372,11.999,11.998,11.999c2.599,0,8.153,0,12.2,0h9.798c1.104,0,1.999-0.896,1.999-2c0-1.105-0.895-2-1.999-2  s-2-0.896-2-2s0.896-2,2-2c0.138,0,0.272,0.014,0.402,0.041c3.122,0.211,5.597,2.783,5.597,5.959c0,3.059-2.291,5.577-5.249,5.947  v0.052h-0.75h-7.985c-4.012,0-11.358,0-14.013,0c-1.104,0-1.999,0.896-1.999,1.999c0,1.105,0.896,2,1.999,2h21.998h0.75v0.053  c2.958,0.369,5.249,2.889,5.249,5.947c0,3.175-2.475,5.747-5.597,5.958c-0.13,0.026-0.265,0.041-0.402,0.041c-1.104,0-2-0.896-2-2  s0.896-1.999,2-1.999s1.999-0.896,1.999-2c0-1.105-0.895-2-1.999-2H44.001h-0.749v-0.052c-2.959-0.37-5.25-2.89-5.25-5.948  c0-1.055,0.294-2.032,0.773-2.89c-6.266-2.168-10.771-8.104-10.771-15.107c0-8.835,7.162-15.998,15.997-15.998  c1.573,0,3.09,0.232,4.524,0.655c2.195-2.828,5.617-4.654,9.475-4.654c6.626,0,11.998,5.371,11.998,11.998  C69.998,43.158,69.705,44.602,69.192,45.938z M58,33.644c-2.213,0-4.215,0.898-5.663,2.351c2.341,1.435,4.286,3.451,5.63,5.854  c0.663-0.114,1.336-0.205,2.033-0.205c2.125,0,4.118,0.559,5.85,1.527l0,0c0.096-0.494,0.149-1.005,0.149-1.527  C65.999,37.225,62.417,33.644,58,33.644z M58,25.645c-1.104,0-2-0.896-2-2v-3.999c0-1.104,0.896-2,2-2s2,0.896,2,2v3.999  C60,24.749,59.104,25.645,58,25.645z M43.859,30.33l-2.828-2.828c-0.781-0.781-0.781-2.047,0-2.828s2.047-0.781,2.828,0l2.828,2.828  c0.781,0.781,0.781,2.047,0,2.828S44.641,31.111,43.859,30.33z M70.998,67.639c0-1.104,0.896-1.999,2-1.999h2.999  c1.104,0,2-0.896,2-2s-0.896-1.999-2-1.999s-1.999-0.896-1.999-2c0-1.105,0.895-2,1.999-2c0.139,0,0.273,0.014,0.403,0.041  c3.122,0.211,5.597,2.783,5.597,5.958c0,3.059-2.291,5.577-5.25,5.948v0.051h-0.75h-2.999  C71.894,69.639,70.998,68.744,70.998,67.639z"/></svg>',
        'Cloud-Wind-Moon': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M76.747,69.588v0.051h-0.75h-2.999c-1.104,0-2-0.895-2-2  c0-1.104,0.896-1.999,2-1.999h2.999c1.104,0,2-0.896,2-2s-0.896-1.999-2-1.999s-2-0.896-2-2c0-1.105,0.896-2,2-2  c0.139,0,0.273,0.014,0.403,0.041c3.122,0.211,5.596,2.783,5.596,5.958C81.996,66.698,79.706,69.217,76.747,69.588z M71.287,49.642  h0.01c0.213,0.602,0.385,1.222,0.5,1.863c-1.394-0.995-3.05-1.646-4.849-1.815c-0.009-0.017-0.021-0.031-0.031-0.048h0.003  c-1.384-2.389-3.962-3.999-6.921-3.999c-1.6,0-3.083,0.48-4.333,1.29c-1.232-5.316-5.974-9.29-11.665-9.29  c-6.626,0-11.998,5.372-11.998,11.999l0,0c0,6.626,5.372,11.999,11.998,11.999c2.598,0,8.152,0,12.199,0h9.798c1.104,0,2-0.896,2-2  c0-1.105-0.896-2-2-2c-1.104,0-1.999-0.896-1.999-2s0.896-2,1.999-2c0.139,0,0.273,0.014,0.403,0.041  c3.122,0.211,5.597,2.783,5.597,5.959c0,3.059-2.291,5.577-5.25,5.947v0.052h-0.75h-7.985c-4.012,0-11.357,0-14.012,0  c-1.104,0-1.999,0.896-1.999,1.999c0,1.105,0.895,2,1.999,2h21.997h0.75v0.053c2.959,0.369,5.25,2.889,5.25,5.947  c0,3.175-2.475,5.747-5.597,5.958c-0.13,0.026-0.265,0.041-0.403,0.041c-1.104,0-1.999-0.896-1.999-2s0.896-1.999,1.999-1.999  c1.104,0,2-0.896,2-2c0-1.105-0.896-2-2-2H44.001h-0.75v-0.052c-2.958-0.37-5.249-2.89-5.249-5.948c0-1.055,0.294-2.032,0.773-2.89  c-6.266-2.168-10.772-8.104-10.772-15.107c0-8.835,7.163-15.998,15.998-15.998c2.002,0,3.914,0.376,5.68,1.048  c1.635-4.683,6.078-8.047,11.318-8.047c0.755,0,1.491,0.078,2.208,0.211c-0.132,0.576-0.208,1.173-0.208,1.789  c0,4.418,3.581,7.998,7.999,7.998c0.615,0,1.212-0.076,1.788-0.207c0.134,0.717,0.212,1.452,0.212,2.207  c0,3.135-1.212,5.979-3.18,8.115C70.436,47.638,70.92,48.612,71.287,49.642z M59.211,30.852c-2.9,0.663-5.174,2.91-5.924,5.774l0,0  c1.917,1.372,3.522,3.153,4.679,5.222c0.664-0.114,1.337-0.205,2.033-0.205c2.618,0,5.033,0.848,7.005,2.271  c0.859-0.98,1.486-2.169,1.786-3.482C63.936,39.527,60.115,35.706,59.211,30.852z"/></svg>',
        'Cloud-Fog-Sun-Alt': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M79.997,43.643h-4c-1.104,0-2-0.896-2-2c0-1.104,0.896-2,2-2h4  c1.104,0,2,0.896,2,2C81.997,42.746,81.101,43.643,79.997,43.643z M72.14,30.33c-0.781,0.781-2.047,0.781-2.828,0  s-0.781-2.047,0-2.828l2.828-2.828c0.781-0.781,2.047-0.781,2.828,0s0.781,2.047,0,2.828L72.14,30.33z M69.818,43.643H29.177  c0.281-0.693,0.613-1.359,0.984-2h27.672c0.041,0.07,0.094,0.134,0.133,0.205c0.664-0.114,1.337-0.205,2.033-0.205  c2.125,0,4.119,0.559,5.85,1.527l0,0c0.096-0.494,0.15-1.006,0.15-1.527c0-4.418-3.582-7.999-8-7.999  c-2.025,0-3.869,0.759-5.277,1.999H36.263c2.294-1.271,4.93-1.999,7.738-1.999c1.572,0,3.09,0.232,4.523,0.655  c2.195-2.828,5.618-4.654,9.475-4.654c6.627,0,11.999,5.371,11.999,11.998C69.998,42.326,69.931,42.992,69.818,43.643z   M57.999,25.645c-1.104,0-1.999-0.896-1.999-2v-3.999c0-1.104,0.896-2,1.999-2c1.105,0,2,0.896,2,2v3.999  C59.999,24.749,59.104,25.645,57.999,25.645z M43.858,30.33l-2.827-2.828c-0.781-0.781-0.781-2.047,0-2.828  c0.78-0.781,2.047-0.781,2.827,0l2.828,2.828c0.781,0.781,0.781,2.047,0,2.828C45.906,31.111,44.64,31.111,43.858,30.33z   M33.444,37.643h21.081c0.696,0.611,1.337,1.278,1.918,2H31.524C32.104,38.92,32.749,38.255,33.444,37.643z M71.825,51.641H28.142  c-0.082-0.656-0.139-1.32-0.139-2h43.303C71.534,50.285,71.71,50.953,71.825,51.641z M33.444,61.641h35.48  c-0.68,0.758-1.447,1.434-2.299,1.998H36.263C35.247,63.078,34.308,62.4,33.444,61.641z M30.161,57.641H71.3  c-0.246,0.699-0.555,1.367-0.92,2H31.524C31.02,59.012,30.567,58.342,30.161,57.641z M28.142,47.641  c0.085-0.682,0.218-1.346,0.387-1.998h40.764c-0.035,0.098-0.062,0.197-0.1,0.295l0,0c0.445,0.529,0.845,1.102,1.194,1.703H28.142z   M28.528,53.641h43.47c0,0.684-0.071,1.348-0.181,2H29.177C28.915,54.994,28.704,54.324,28.528,53.641z"/></svg>',
        'Cloud-Fog-Moon-Alt': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M67.214,43.643c0.746-0.927,1.303-2.013,1.576-3.211  c-4.854-0.904-8.676-4.726-9.579-9.58c-2.559,0.585-4.626,2.404-5.594,4.791H36.263c2.293-1.271,4.93-1.999,7.738-1.999  c2.002,0,3.914,0.376,5.68,1.048c1.635-4.683,6.078-8.047,11.318-8.047c0.755,0,1.491,0.078,2.207,0.211  c-0.131,0.576-0.207,1.173-0.207,1.789c0,4.418,3.581,7.998,7.998,7.998c0.616,0,1.213-0.076,1.789-0.207  c0.133,0.717,0.211,1.452,0.211,2.207c0,1.789-0.405,3.478-1.109,5H67.214z M71.997,53.641c0,0.684-0.07,1.348-0.18,2H29.177  c-0.262-0.646-0.473-1.315-0.649-2H71.997z M71.3,57.641c-0.247,0.699-0.555,1.367-0.92,2H31.523c-0.505-0.629-0.956-1.299-1.362-2  H71.3z M68.925,61.641c-0.68,0.758-1.447,1.434-2.299,1.999H36.263c-1.016-0.562-1.955-1.239-2.818-1.999H68.925z M28.142,51.641  c-0.082-0.656-0.139-1.32-0.139-1.999h43.284c0.229,0.646,0.417,1.31,0.534,1.999H28.142z M69.818,46.758  c0.196,0.281,0.354,0.588,0.527,0.884H28.142c0.085-0.682,0.218-1.347,0.386-1.999h42.19C70.437,46.029,70.142,46.407,69.818,46.758  z M66.597,43.643h-37.42c0.281-0.693,0.613-1.359,0.984-2h27.675c0.04,0.07,0.091,0.134,0.13,0.205  c0.664-0.114,1.337-0.205,2.033-0.205C62.442,41.643,64.702,42.388,66.597,43.643z M33.444,37.643h21.111  c0.689,0.607,1.314,1.283,1.891,2H31.523C32.104,38.92,32.749,38.255,33.444,37.643z"/></svg>',
        'Cloud-Sun': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M79.941,43.641h-4c-1.104,0-2-0.895-2-2c0-1.104,0.896-1.998,2-1.998h4  c1.104,0,2,0.895,2,1.998C81.941,42.746,81.045,43.641,79.941,43.641z M72.084,30.329c-0.781,0.781-2.047,0.781-2.828,0  c-0.781-0.78-0.781-2.047,0-2.827l2.828-2.828c0.781-0.781,2.047-0.781,2.828,0c0.781,0.78,0.781,2.047,0,2.828L72.084,30.329z   M69.137,45.936L69.137,45.936c1.749,2.086,2.806,4.77,2.806,7.705c0,6.625-5.372,11.998-11.999,11.998c-2.775,0-12.801,0-15.998,0  c-8.835,0-15.998-7.162-15.998-15.998s7.163-15.998,15.998-15.998c1.572,0,3.09,0.232,4.523,0.654  c2.195-2.827,5.618-4.654,9.475-4.654c6.627,0,11.999,5.373,11.999,11.998C69.942,43.156,69.649,44.602,69.137,45.936z   M31.947,49.641c0,6.627,5.371,11.998,11.998,11.998c3.616,0,12.979,0,15.998,0c4.418,0,7.999-3.582,7.999-7.998  c0-4.418-3.581-8-7.999-8c-1.6,0-3.083,0.482-4.333,1.291c-1.231-5.316-5.974-9.289-11.665-9.289  C37.318,37.643,31.947,43.014,31.947,49.641z M57.943,33.643c-2.212,0-4.215,0.898-5.662,2.349c2.34,1.436,4.285,3.453,5.629,5.854  c0.664-0.113,1.337-0.205,2.033-0.205c2.125,0,4.119,0.559,5.85,1.527l0,0c0.096-0.494,0.15-1.004,0.15-1.527  C65.943,37.225,62.361,33.643,57.943,33.643z M57.943,25.643c-1.104,0-1.999-0.895-1.999-1.999v-3.999c0-1.105,0.896-2,1.999-2  c1.105,0,2,0.895,2,2v3.999C59.943,24.749,59.049,25.643,57.943,25.643z M43.803,30.329l-2.827-2.827  c-0.781-0.781-0.781-2.048,0-2.828c0.78-0.781,2.047-0.781,2.827,0l2.828,2.828c0.781,0.78,0.781,2.047,0,2.827  C45.851,31.11,44.584,31.11,43.803,30.329z"/></svg>',
        'Cloud-Moon': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M69.763,46.758L69.763,46.758c1.368,1.949,2.179,4.318,2.179,6.883  c0,6.625-5.371,11.998-11.998,11.998c-2.775,0-12.801,0-15.998,0c-8.836,0-15.998-7.162-15.998-15.998s7.162-15.998,15.998-15.998  c2.002,0,3.914,0.375,5.68,1.047l0,0c1.635-4.682,6.078-8.047,11.318-8.047c0.755,0,1.491,0.078,2.207,0.212  c-0.131,0.575-0.207,1.173-0.207,1.788c0,4.418,3.581,7.999,7.998,7.999c0.616,0,1.213-0.076,1.789-0.208  c0.133,0.717,0.211,1.453,0.211,2.208C72.941,41.775,71.73,44.621,69.763,46.758z M31.947,49.641  c0,6.627,5.371,11.998,11.998,11.998c3.616,0,12.979,0,15.998,0c4.418,0,7.999-3.582,7.999-7.998c0-4.418-3.581-8-7.999-8  c-1.6,0-3.083,0.482-4.334,1.291c-1.231-5.316-5.973-9.29-11.664-9.29C37.318,37.642,31.947,43.014,31.947,49.641z M51.496,35.545  c0.001,0,0.002,0,0.002,0S51.497,35.545,51.496,35.545z M59.155,30.85c-2.9,0.664-5.175,2.91-5.925,5.775l0,0  c1.918,1.372,3.523,3.152,4.68,5.22c0.664-0.113,1.337-0.205,2.033-0.205c2.618,0,5.033,0.85,7.005,2.271l0,0  c0.858-0.979,1.485-2.168,1.786-3.482C63.881,39.525,60.059,35.706,59.155,30.85z"/></svg>',
        'Umbrella': '<svg version="1.1" class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" d="M66.499,46.501c-3.037,0-5.5,1.343-5.5,2.999c0-1.656-2.461-2.999-5.5-2.999 c-1.863,0-3.504,0.509-4.498,1.282v8.716h1v4c0,1.104,0.895,2,2,2c1.104,0,1.998-0.896,1.998-2s0.896-2,2-2c1.105,0,2,0.896,2,2 c0,3.313-2.686,5.999-5.998,5.999c-3.314,0-6-2.686-6-5.999v-4h1v-8.716c-0.994-0.773-2.635-1.282-4.5-1.282  c-3.037,0-5.498,1.343-5.498,2.999l0,0c0-1.656-2.463-2.999-5.5-2.999s-5.5,1.343-5.5,2.999c0-7.179,9.85-15.998,21.999-15.998  S71.997,42.321,71.997,49.5C71.997,47.844,69.536,46.501,66.499,46.501z"/></svg>'
      };
      return svgMap[iconName] || null;
    },

    getIcon: function(forecast){
      var iconMap = {
          'clear-day': { day: 'Sun', night: 'Sun'},
          'clear-night': { day: 'Moon', night: 'Moon' },
          'rain': { day: 'Cloud-Rain-Sun', night: 'Cloud-Rain-Moon' },
          'snow': { day: 'Cloud-Snow-Sun', night: 'Cloud-Snow-Moon' },
          'sleet': { day: 'Cloud-Snow-Sun-Alt', night: 'Cloud-Snow-Moon-Alt' },
          'wind': { day: 'Cloud-Wind-Sun', night: 'Cloud-Wind-Moon' },
          'fog': { day: 'Cloud-Fog-Sun-Alt', night: 'Cloud-Fog-Moon-Alt' },
          'cloudy': { day: 'Cloud-Sun', night: 'Cloud-Moon' },
          'partly-cloudy-day': { day: 'Cloud-Sun', night: 'Cloud-Moon' },
          'partly-cloudy-night': { day: 'Cloud-Moon', night: 'Cloud-Moon' }
        },
        nightOrDay = (this.isDayTime(forecast)) ? 'day' : 'night';

      return this.getSvg([iconMap[forecast.icon][nightOrDay]]);
    }

  });
});
